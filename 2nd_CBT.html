<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CBTãƒ†ã‚¹ãƒˆ | ç¬¬3/4/6ç« ã‹ã‚‰ãƒãƒ©ãƒ³ã‚¹æŠ½å‡º</title>
  <style>
    :root{
      --bg:#0b1020;--panel:#121a33;--accent:#6aa1ff;--text:#e9eefc;--muted:#a8b3d6;--danger:#ff6a7a;--good:#5ad39d
    }
    html,body{height:100%}
    body{margin:0;background:linear-gradient(160deg,#0b1020,#101830 55%,#0b1020);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji"}
    .container{max-width:920px;margin:0 auto;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:16px}
    .brand{font-weight:700;letter-spacing:.3px}
    .chip{display:inline-flex;align-items:center;gap:8px;padding:6px 12px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);font-size:12px}
    .panel{background:var(--panel);border:1px solid rgba(255,255,255,.05);border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.25);padding:18px}
    .muted{color:var(--muted)}
    .progress{height:10px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden}
    .progress>span{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#b782ff);width:0}
    .question-card{display:grid;gap:16px}
    fieldset{border:0;margin:0;padding:0}
    legend{font-weight:700;font-size:18px;margin-bottom:8px}
    .opts{display:grid;gap:10px}
    .opt{display:flex;align-items:flex-start;gap:10px;padding:12px 14px;border:1px solid rgba(255,255,255,.08);border-radius:14px;cursor:pointer;background:rgba(255,255,255,.02)}
    .opt input{accent-color:var(--accent);margin-top:2px}
    .opt.correct{outline:2px solid var(--good);background:rgba(90,211,157,.08)}
    .opt.wrong{outline:2px solid var(--danger);background:rgba(255,106,122,.08)}
    .nav{display:flex;gap:10px;justify-content:space-between;margin-top:6px;flex-wrap:wrap}
    button{appearance:none;border:0;border-radius:14px;padding:12px 16px;font-weight:600;cursor:pointer;background:var(--accent);color:#081225;box-shadow:0 6px 18px rgba(106,161,255,.35)}
    button.secondary{background:rgba(255,255,255,.08);color:var(--text);box-shadow:none;border:1px solid rgba(255,255,255,.12)}
    button.ghost{background:transparent;color:var(--text);border:1px dashed rgba(255,255,255,.2)}
    button:disabled{opacity:.5;cursor:not-allowed}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
    .stat{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);padding:14px;border-radius:14px}
    .explain{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);padding:12px;border-radius:12px;margin-top:8px}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    a.link{color:#a2c4ff}
    .start{display:grid;gap:16px}
    .row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    label.switch{display:inline-flex;align-items:center;gap:8px}
    input[type="checkbox"]{accent-color:var(--accent)}
    .footer{display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin-top:12px}
    .kbd{font-variant-numeric:tabular-nums;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);padding:1px 6px;border-radius:6px;font-size:12px}
      /* ===== ç›®ç«‹ã¤ã‚µã‚¤ã‚ºé¸æŠãƒ”ãƒ« ===== */
    .size-pills{gap:10px}
    .size-pills .chip{font-size:14px;padding:10px 16px;border:2px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);transition:transform .06s ease,box-shadow .2s ease,background .2s ease,border-color .2s ease}
    .size-pills .chip:hover{border-color:var(--accent);background:rgba(106,161,255,.12)}
    .size-pills input[type="radio"]:checked + label.chip{border-color:var(--accent);background:linear-gradient(180deg,var(--accent),#b6ceff);color:#081225;box-shadow:0 8px 22px rgba(106,161,255,.35);transform:translateY(-1px)}
    .size-pills input[type="radio"] + label.chip{outline:0}
    .size-pills input[type="radio"]:focus-visible + label.chip{box-shadow:0 0 0 3px rgba(106,161,255,.45)}
</style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">CBTãƒ†ã‚¹ãƒˆï¼ˆã‚¹ãƒãƒ›å¯¾å¿œï¼‰</div>
      <div class="chip" id="chipinfo" aria-label="info"><span aria-hidden="true">ğŸ“</span><span>å„ç« ãƒãƒ©ãƒ³ã‚¹æŠ½å‡º</span></div>
    </header>

    <div class="panel" aria-live="polite">
      <div class="progress" aria-hidden="true"><span id="progress"></span></div>
      <div class="muted" id="meta" style="margin:10px 0 16px"></div>
      <div id="screen"></div>
    </div>

    <div class="footer">
      <div class="muted">ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ: <span class="kbd">1-4</span> é¸æŠ / <span class="kbd">Enter</span> æ¬¡ã¸</div>
      <div class="muted">é€²æ—ã¯ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ã€‚Backspaceã§ãƒšãƒ¼ã‚¸æˆ»ã‚Šã¯ç„¡åŠ¹ã€‚</div>
    </div>
  </div>

<script>
"use strict";
/********************
 * è¨­å®š
 ********************/
const CONFIG = {
  title: "ç¬¬3/4/6ç«  CBTï¼ˆåˆè¨ˆå¯å¤‰ãƒ»å„ç« ãƒãƒ©ãƒ³ã‚¹ï¼‰",
  sampleSize: 30,
  shuffleQuestions: true,
  shuffleOptions: true,
  allowReviewBeforeSubmit: true,
  showExplanationAfterSubmit: true,
  persistKey: "cbt-v2-state",
  masteredKey: "cbt-v2-mastered"
};

/********************
 * å•é¡Œãƒãƒ³ã‚¯ï¼ˆ115å•: ç¬¬3ç« 15 + ç¬¬4ç« 50 + ç¬¬6ç« 50ï¼‰
 ********************/
function makeQ(chapter, number, stem, options, correctIndex, explanation){
  return { id: `ch${chapter}-${number}`, chapter, number, stem, options, correctIndex, explanation };
}

const BANK = [
  // ===== ç¬¬3ç« ï¼ˆQ1-15ï¼‰ =====
  makeQ(3,1,'æ™‚é–“ã‚„æ¸©åº¦ã®ã‚ˆã†ã«é€£ç¶šã—ã¦å¤‰åŒ–ã™ã‚‹é‡ã‚’ã€æ™‚è¨ˆã®é‡ã®ä½ç½®ã‚„æ°´éŠ€æŸ±ã®é•·ã•ã®ã‚ˆã†ã«é€£ç¶šã—ãŸé‡ã§è¡¨ç¾ã™ã‚‹ã“ã¨ã‚’ä½•ã¨å‘¼ã¶ã‹', ['ãƒ‡ã‚¸ã‚¿ãƒ«','ã‚¢ãƒŠãƒ­ã‚°','ç¬¦å·åŒ–','é‡å­åŒ–'], 1,'é€£ç¶šé‡ã‚’é€£ç¶šé‡ã§è¡¨ç¾ã™ã‚‹ã®ãŒã‚¢ãƒŠãƒ­ã‚°ã€‚'),
  makeQ(3,2,'é€£ç¶šã—ã¦å¤‰åŒ–ã™ã‚‹é‡ã‚’ã€ä¸€å®šã®é–“éš”ã§åŒºåˆ‡ã£ãŸæ•°å­—ã‚„ã€æ®µéšçš„ãªæ•°å€¤ã§è¡¨ç¾ã™ã‚‹æ–¹æ³•ã‚’ä½•ã¨å‘¼ã¶ã‹', ['ã‚¢ãƒŠãƒ­ã‚°','ãƒ‡ã‚¸ã‚¿ãƒ«','æ¨™æœ¬åŒ–','å¯é€†åœ§ç¸®'], 1,'é›¢æ•£çš„ãªè¡¨ç¾ãŒãƒ‡ã‚¸ã‚¿ãƒ«ã€‚'),
  makeQ(3,3,'æƒ…å ±ã‚’ãƒ‡ã‚¸ã‚¿ãƒ«åŒ–ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã‹', ['æƒ…å ±ãŒé€£ç¶šçš„ãªé‡ã§è¡¨ç¾ã•ã‚Œã‚‹ãŸã‚ã€ãã®ã¾ã¾ã®å½¢ã§ä¿å­˜ã§ãã‚‹ã€‚','ãƒ‡ãƒ¼ã‚¿ãŒæ•°å€¤åŒ–ã•ã‚Œãªã„ãŸã‚ã€åŠ å·¥ãŒé›£ã—ã„ã€‚','æƒ…å ±ã‚’å…ƒé€šã‚Šã«å†ç¾ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã‚ã‚‹ã€‚','ä¿®æ­£ã‚„ç·¨é›†ãªã©ã®åŠ å·¥ãŒå›°é›£ã«ãªã‚‹ã€‚'], 2,'åŠ£åŒ–ã®å°‘ãªã„è¤‡è£½ã‚„æ­£ç¢ºãªå†ç¾ãŒå¯èƒ½ã€‚'),
  makeQ(3,4,'ãƒ‡ãƒ¼ã‚¿ã®æ„å‘³ã‚’ä¿ã£ãŸã¾ã¾ãƒ‡ãƒ¼ã‚¿é‡ã‚’å°ã•ãã™ã‚‹å‡¦ç†ã®ã†ã¡ã€åœ§ç¸®å‰ã¨å±•é–‹å¾Œã®ãƒ‡ãƒ¼ã‚¿ãŒå®Œå…¨ã«åŒã˜ã«ãªã‚‹æ–¹å¼ã‚’ä½•ã¨å‘¼ã¶ã‹', ['éå¯é€†åœ§ç¸®','æ¨™æœ¬åŒ–','å¯é€†åœ§ç¸®','é‡å­åŒ–'], 2,'å¯é€†åœ§ç¸®ã¯å®Œå…¨ä¸€è‡´ã§å¾©å…ƒå¯èƒ½ã€‚'),
  makeQ(3,5,'0ã¨1ã®2ã¤ã®çŠ¶æ…‹ã—ã‹ã‚‚ãŸãªã„æƒ…å ±é‡ã®æœ€å°å˜ä½ã§ã‚ã‚Šã€2é€²æ•°ã®1æ¡ã«ç›¸å½“ã™ã‚‹ã‚‚ã®ã¯ä½•ã‹', ['ãƒã‚¤ãƒˆ','ãƒ¯ãƒ¼ãƒ‰','ãƒ“ãƒƒãƒˆ','2é€²æ³•'], 2,'bitã¯æƒ…å ±é‡ã®æœ€å°å˜ä½ã€‚'),
  makeQ(3,6,'8ãƒ“ãƒƒãƒˆã‚’ã¾ã¨ã‚ã¦ä½•ã¨å‘¼ã¶ã‹', ['ã‚­ãƒ­ãƒ“ãƒƒãƒˆ','16é€²æ•°','ãƒã‚¤ãƒˆ','2é€²æ³•'], 2,'8ãƒ“ãƒƒãƒˆ=1ãƒã‚¤ãƒˆã€‚'),
  makeQ(3,7,'ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒã™ã¹ã¦ã®è¨ˆç®—ã‚’è¡Œã†ãŸã‚ã«ä½¿ç”¨ã™ã‚‹åŸºæœ¬çš„ãªè«–ç†å›è·¯ã®çµ„ã¿åˆã‚ã›ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã‹', ['ANDå›è·¯ã€ORå›è·¯ã€NANDå›è·¯','NOTå›è·¯ã€NORå›è·¯ã€XORå›è·¯','è«–ç†ç©(AND)å›è·¯ã€è«–ç†å’Œ(OR)å›è·¯ã€å¦å®š(NOT)å›è·¯','åŠåŠ ç®—å›è·¯ã€å…¨åŠ ç®—å›è·¯ã€å¦å®šå›è·¯'], 2,'AND/OR/NOTã§ä»»æ„ã®è«–ç†ã‚’æ§‹æˆã§ãã‚‹ã€‚'),
  makeQ(3,8,'è«–ç†ç©(AND)å›è·¯ã®æ©Ÿèƒ½ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã‹', ['å…¥åŠ›ã—ãŸä¿¡å·ã‚’åè»¢ã—ãŸå€¤ã‚’å‡ºåŠ›ã™ã‚‹å›è·¯','å…¥åŠ›ã®ã„ãšã‚Œã‹ä¸€æ–¹ãŒ1ã§ã‚ã‚Œã°ã€1ã‚’å‡ºåŠ›ã™ã‚‹å›è·¯','2ã¤ã®å…¥åŠ›ãŒã¨ã‚‚ã«1ã®æ™‚ã ã‘ã€å‡ºåŠ›ä¿¡å·ãŒ1ã«ãªã‚‹å›è·¯','2ã¤ã®å…¥åŠ›ãŒç•°ãªã‚‹ã¨ãã«1ã‚’å‡ºåŠ›ã™ã‚‹å›è·¯'], 2,'ANDã¯ä¸¡æ–¹1ã§1ã€‚'),
  makeQ(3,9,'2é€²æ•°ã§æ•°å€¤ã‚’è¡¨ç¾ã™ã‚‹ã¨æ¡æ•°ãŒå¤šããªã‚‹ãŸã‚ã€ã‚ˆã‚ŠçŸ­ãè¡¨ç¾ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒå¤šãã€0ã€œ9ã¨Aã€œFã®è‹±å­—ã‚’ä½¿ç”¨ã™ã‚‹æ•°ã®è¡¨ç¾æ–¹æ³•ã¯ã©ã‚Œã‹', ['8é€²æ•°','10é€²æ•°','16é€²æ•°','32é€²æ•°'], 2,'0ã€œ9ã¨Aã€œFã§è¡¨ç¾ã™ã‚‹ã€‚'),
  makeQ(3,10,'æ–‡å­—ã‚„è¨˜å·ã‚’ã€2é€²æ•°ã§ã©ã®ã‚ˆã†ã«è¡¨ã™ã‹å–ã‚Šæ±ºã‚ãŸã‚‚ã®ã‚’ä½•ã¨å‘¼ã¶ã‹', ['åˆ¶å¾¡ã‚³ãƒ¼ãƒ‰','æ–‡å­—ã‚³ãƒ¼ãƒ‰','è£œæ•°','ç¬¦å·åŒ–'], 1,'ä¾‹: ASCII, UTF-8ã€‚'),
  makeQ(3,11,'1ãƒã‚¤ãƒˆã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã§è¡¨ç¾ã§ãã‚‹æ–‡å­—ã®ç¨®é¡æ•°ã¯æœ€å¤§ã§ä½•ç¨®é¡ã‹', ['64ç¨®é¡','128ç¨®é¡','256ç¨®é¡','65536ç¨®é¡'], 2,'2^8=256ã€‚'),
  makeQ(3,12,'éŸ³å£°ã‚’ãƒ‡ã‚¸ã‚¿ãƒ«åŒ–ã™ã‚‹éç¨‹ã§ã€ã‚¢ãƒŠãƒ­ã‚°ã®é›»æ°—ä¿¡å·ã®æ³¢ã‚’ä¸€å®šã®æ™‚é–“é–“éš”ã«åˆ†å‰²ã—ã€é‡ã¨ã—ã¦å–ã‚Šå‡ºã™å‡¦ç†ã‚’ä½•ã¨å‘¼ã¶ã‹', ['é‡å­åŒ–','æ¨™æœ¬åŒ–ï¼ˆã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ï¼‰','ç¬¦å·åŒ–','åœ§ç¸®'], 1,'æ™‚é–“æ–¹å‘ã«é–“å¼•ãå‡¦ç†ã€‚'),
  makeQ(3,13,'éŸ³å£°ã‚’ãƒ‡ã‚¸ã‚¿ãƒ«åŒ–ã™ã‚‹éç¨‹ã§ã€ä¿¡å·ãƒ¬ãƒ™ãƒ«ã‚’ä½•æ®µéšã§è¡¨ç¾ã™ã‚‹ã‹ã‚’å®šã‚ã¦ã€æ¨™æœ¬åŒ–ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ãã®æ®µéšæ•°ã«å½“ã¦ã¯ã‚ã¦æ•´æ•°å€¤ã«ç½®ãæ›ãˆã‚‹å‡¦ç†ã‚’ä½•ã¨å‘¼ã¶ã‹', ['æ¨™æœ¬åŒ–','ç¬¦å·åŒ–','é‡å­åŒ–','æ¸›æ³•æ··è‰²'], 2,'æŒ¯å¹…æ–¹å‘ã®é›¢æ•£åŒ–ã€‚'),
  makeQ(3,14,'ãƒ†ãƒ¬ãƒ“ã‚„ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã§ç”¨ã„ã‚‰ã‚Œã‚‹è‰²ã®è¡¨ç¾æ–¹æ³•ã§ã€èµ¤(R)ã€ç·‘(G)ã€é’(B)ã®ä¸‰è‰²ã‚’æ··ãœã‚‹ã¨æ˜ã‚‹ã•ãŒå¢—ã—ã€ä½•è‰²ã«è¿‘ã¥ãã‹', ['é»’','ã‚·ã‚¢ãƒ³','ãƒã‚¼ãƒ³ã‚¿','ç™½'], 3,'åŠ æ³•æ··è‰²ã¯ç™½ã«è¿‘ã¥ãã€‚'),
  makeQ(3,15,'ç”»åƒã‚’æ§‹æˆã™ã‚‹æœ€å°ã®å˜ä½ã‚’ä½•ã¨å‘¼ã¶ã‹', ['ãƒ‰ãƒƒãƒˆ','éšèª¿','ç”»ç´ ï¼ˆãƒ”ã‚¯ã‚»ãƒ«ï¼‰','ãƒ•ãƒ¬ãƒ¼ãƒ '], 2,'pixel(ç”»ç´ )ã€‚'),

  // ===== ç¬¬4ç« ï¼ˆQ16-65 ã®50å•ï¼‰ =====
  makeQ(4,16,'å­¦æ ¡ã‚„ä¼šç¤¾ãªã©ã®é™ã‚‰ã‚ŒãŸç¯„å›²ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¯ã©ã‚Œã‹ã€‚',['WAN','LAN','ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ','DMZ'],1,'é™å®šç¯„å›²ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¯LANã€‚'),
  makeQ(4,17,'LANã©ã†ã—ã‚’åºƒåŸŸã§çµã¶ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¯ã©ã‚Œã‹ã€‚',['LAN','WAN','ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ','ãƒ—ãƒ­ãƒˆã‚³ãƒ«'],1,'åºƒåŸŸã¯WANã€‚'),
  makeQ(4,18,'ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¦æ±‚ã«å¿œã˜ã¦ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã™ã‚‹è¦ç´ ã¯ã©ã‚Œã‹ã€‚',['ãƒ«ãƒ¼ã‚¿','ã‚µãƒ¼ãƒ','ãƒ—ãƒ­ãƒˆã‚³ãƒ«','ãƒ–ãƒ©ã‚¦ã‚¶'],1,'æä¾›å´ã¯ã‚µãƒ¼ãƒã€‚'),
  makeQ(4,19,'æƒ…å ±ä¼é”ã®ç´„æŸã”ã¨ã¯ã©ã‚Œã‹ã€‚',['TCP/IP','IPã‚¢ãƒ‰ãƒ¬ã‚¹','ãƒ—ãƒ­ãƒˆã‚³ãƒ«','ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°'],2,'é€šä¿¡è¦ç´„=ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€‚'),
  makeQ(4,20,'ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã®ä¸­å¿ƒçš„ãƒ—ãƒ­ãƒˆã‚³ãƒ«ç¾¤ã¯ã©ã‚Œã‹ã€‚',['HTTP','POP','SMTP','TCP/IP'],3,'TCPã¨IPã‚’ä¸­å¿ƒã¨ã™ã‚‹ã€‚'),
  makeQ(4,21,'TCPã®ä¸»ãªå½¹å‰²ã¯ã©ã‚Œã‹ã€‚',['çµŒè·¯æ±ºå®š','ç‰©ç†å±¤è¦å®š','ãƒ‡ãƒ¼ã‚¿ã®æ­£ç¢ºæ€§ä¿è¨¼','ã‚¢ãƒ—ãƒªå±¤ã‚„ã‚Šå–ã‚Š'],2,'å†é€ãƒ»é †åºåˆ¶å¾¡ç­‰ã§ä¿¡é ¼æ€§ã‚’æ‹…ä¿ã€‚'),
  makeQ(4,22,'IPã®ä¸»ãªå½¹å‰²ã¯ã©ã‚Œã‹ã€‚',['ä¿¡é ¼æ€§é€šä¿¡','ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¨è»¢é€','Webé–²è¦§','ãƒ¡ãƒ¼ãƒ«é€ä¿¡'],1,'IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«åŸºã¥ãè»¢é€ã€‚'),
  makeQ(4,23,'ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã®å€‹åˆ¥ã®ç•ªå·ã¯ã©ã‚Œã‹ã€‚',['ãƒ‰ãƒ¡ã‚¤ãƒ³å','IPã‚¢ãƒ‰ãƒ¬ã‚¹','MACã‚¢ãƒ‰ãƒ¬ã‚¹','ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«'],1,'è­˜åˆ¥ç•ªå·ã¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚'),
  makeQ(4,24,'IPv4ã®è¡¨ç¾ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã‹ã€‚',['64bitãƒ»16é€²','32bitãƒ»8bitæ¯ã«ãƒ‰ãƒƒãƒˆåŒºåˆ‡ã‚Šã®10é€²Ã—4','128bitãƒ»16é€²Ã—8','48bitãƒ»16é€²Ã—6'],1,'ä¾‹: 192.168.0.1'),
  makeQ(4,25,'é‡è¤‡ã—ãªã„å…¬çš„ãªIPã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ã©ã‚Œã‹ã€‚',['ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIP','ãƒ‰ãƒ¡ã‚¤ãƒ³å','ã‚°ãƒ­ãƒ¼ãƒãƒ«IP','ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤'],2,'ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã§ä¸€æ„ã€‚'),
  makeQ(4,26,'LANå†…ã§ç”¨ã„ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ã©ã‚Œã‹ã€‚',['ã‚°ãƒ­ãƒ¼ãƒãƒ«IP','ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIP','DNSã‚¢ãƒ‰ãƒ¬ã‚¹','MACã‚¢ãƒ‰ãƒ¬ã‚¹'],1,'å†…éƒ¨ç”¨ã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã€‚'),
  makeQ(4,27,'IPã‚’åˆ†ã‹ã‚Šã‚„ã™ã„åå‰ã«ã—ãŸã‚‚ã®ã¯ã©ã‚Œã‹ã€‚',['URL','IPã‚¢ãƒ‰ãƒ¬ã‚¹','ãƒ‰ãƒ¡ã‚¤ãƒ³å','ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«'],2,'ä¾‹: example.com'),
  makeQ(4,28,'ãƒ‰ãƒ¡ã‚¤ãƒ³ã¨IPã‚’ç›¸äº’å¤‰æ›ã™ã‚‹ã‚µãƒ¼ãƒã¯ã©ã‚Œã‹ã€‚',['Webã‚µãƒ¼ãƒ','ãƒ¡ãƒ¼ãƒ«ã‚µãƒ¼ãƒ','DNSã‚µãƒ¼ãƒ','ãƒ«ãƒ¼ã‚¿'],2,'åå‰è§£æ±ºã‚’æ‹…å½“ã€‚'),
  makeQ(4,29,'æœ€é©ãªè»¢é€çµŒè·¯ã‚’é¸ã¶ä»•çµ„ã¿ã¯ã©ã‚Œã‹ã€‚',['ãƒ‘ã‚±ãƒƒãƒˆäº¤æ›','ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯åˆ¶å¾¡','ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°','ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µãƒ¼ãƒ'],2,'çµŒè·¯é¸æŠ=ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€‚'),
  makeQ(4,30,'WWWã§ä½¿ã†ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯ã©ã‚Œã‹ã€‚',['SMTP','POP','TCP','HTTP'],3,'Webé–²è¦§=HTTPã€‚'),
  makeQ(4,31,'Webãƒšãƒ¼ã‚¸ã®è¨˜è¿°è¨€èªã¯ã©ã‚Œã‹ã€‚',['JavaScript','Python','Cè¨€èª','HTML'],3,'æ–‡æ›¸æ§‹é€ ã¯HTMLã€‚'),
  makeQ(4,32,'Webã®å ´æ‰€æŒ‡å®šã«ä½¿ã†ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚',['IPã‚¢ãƒ‰ãƒ¬ã‚¹','ãƒ‰ãƒ¡ã‚¤ãƒ³å','URL','Webã‚µãƒ¼ãƒ'],2,'ä¾‹: https://...'),
  makeQ(4,33,'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ä¸€èˆ¬æ›¸å¼ã¯ã©ã‚Œã‹ã€‚',['ãƒ‰ãƒ¡ã‚¤ãƒ³/ãƒ¦ãƒ¼ã‚¶','ãƒ¦ãƒ¼ã‚¶@ãƒ‰ãƒ¡ã‚¤ãƒ³','IP:ãƒãƒ¼ãƒˆ','ãƒ¦ãƒ¼ã‚¶.ãƒ‰ãƒ¡ã‚¤ãƒ³'],1,'user@example.com'),
  makeQ(4,34,'ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã§ä½¿ã†ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯ã©ã‚Œã‹ã€‚',['POP','IMAP','HTTP','SMTP'],3,'é€ä¿¡=SMTPã€‚'),
  makeQ(4,35,'é€šä¿¡é€Ÿåº¦ã®å˜ä½ã¯ã©ã‚Œã‹ã€‚',['Hz','MB/s','fps','bps'],3,'bits per secondã€‚'),
  makeQ(4,36,'é€Ÿåº¦å˜ä½ã®1k(åé€²)ã¯ã©ã‚Œã‹ã€‚',['1024','100','1000','10^6'],2,'é€šä¿¡åˆ†é‡ã§ã¯k=1000ãŒå¤šã„ã€‚'),
  makeQ(4,37,'æƒ…å ±ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸‰è¦ç´ ã«å«ã¾ã‚Œãªã„ã®ã¯ã©ã‚Œã‹ã€‚',['æ©Ÿå¯†æ€§','å®Œå…¨æ€§','è¿…é€Ÿæ€§','å¯ç”¨æ€§'],2,'CIAã®C,I,Aã€‚'),
  makeQ(4,38,'è¨±å¯è€…ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹çŠ¶æ…‹ã¯ã©ã‚Œã‹ã€‚',['å®Œå…¨æ€§','å¯ç”¨æ€§','æ©Ÿå¯†æ€§','èªè¨¼'],2,'Confidentialityã€‚'),
  makeQ(4,39,'æ”¹ã–ã‚“ãƒ»ç ´å£ŠãŒãªã„çŠ¶æ…‹ã¯ã©ã‚Œã‹ã€‚',['æ©Ÿå¯†æ€§','å¯ç”¨æ€§','å®Œå…¨æ€§','èªè¨¼'],2,'Integrityã€‚'),
  makeQ(4,40,'å¿…è¦æ™‚ã«ä¸­æ–­ãªãã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãªçŠ¶æ…‹ã¯ã©ã‚Œã‹ã€‚',['æ©Ÿå¯†æ€§','å®Œå…¨æ€§','å¯ç”¨æ€§','èªè¨¼'],2,'Availabilityã€‚'),
  makeQ(4,41,'å½“äººãŒæ­£è¦åˆ©ç”¨è€…ã§ã‚ã‚‹ã¨ç¢ºèªã™ã‚‹è¡Œç‚ºã¯ã©ã‚Œã‹ã€‚',['ãƒ¦ãƒ¼ã‚¶ID','ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰','èªè¨¼','ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡'],2,'æœ¬äººç¢ºèª=èªè¨¼ã€‚'),
  makeQ(4,42,'äººç‚ºçš„æ‰‹æ®µã§æ©Ÿå¯†æƒ…å ±ã‚’å…¥æ‰‹ã™ã‚‹è¡Œç‚ºã¯ã©ã‚Œã‹ã€‚',['ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹','ãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°','ãƒ©ãƒ³ã‚µãƒ ã‚¦ã‚§ã‚¢','ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°'],3,'è‚©è¶Šã—è¦—ãç­‰ã€‚'),
  makeQ(4,43,'æƒ…å ±ã‚’å‹æ‰‹ã«å¤–éƒ¨é€ä¿¡ã™ã‚‹ãƒãƒ«ã‚¦ã‚§ã‚¢ã¯ã©ã‚Œã‹ã€‚',['ã‚¢ãƒ‰ã‚¦ã‚§ã‚¢','ãƒ©ãƒ³ã‚µãƒ ã‚¦ã‚§ã‚¢','ã‚¹ãƒ‘ã‚¤ã‚¦ã‚§ã‚¢','ãƒ¯ãƒ¼ãƒ '],2,'ã‚¹ãƒ‘ã‚¤æ´»å‹•ã€‚'),
  makeQ(4,44,'æ„å›³ã—ãªã„åºƒå‘Šã‚’è¡¨ç¤ºã™ã‚‹ãƒãƒ«ã‚¦ã‚§ã‚¢ã¯ã©ã‚Œã‹ã€‚',['ã‚¢ãƒ‰ã‚¦ã‚§ã‚¢','ã‚¹ãƒ‘ã‚¤ã‚¦ã‚§ã‚¢','ãƒ©ãƒ³ã‚µãƒ ã‚¦ã‚§ã‚¢','ãƒˆãƒ­ã‚¤ã®æœ¨é¦¬'],0,'åºƒå‘Šé…ä¿¡ç›®çš„ã€‚'),
  makeQ(4,45,'æš—å·åŒ–ã—èº«ä»£é‡‘ã‚’è¦æ±‚ã™ã‚‹ãƒãƒ«ã‚¦ã‚§ã‚¢ã¯ã©ã‚Œã‹ã€‚',['ã‚¹ãƒ‘ã‚¤ã‚¦ã‚§ã‚¢','ã‚¢ãƒ‰ã‚¦ã‚§ã‚¢','ãƒ©ãƒ³ã‚µãƒ ã‚¦ã‚§ã‚¢','ã‚¦ã‚¤ãƒ«ã‚¹'],2,'Ransom(èº«ä»£é‡‘)ã€‚'),
  makeQ(4,46,'å¤–éƒ¨ã‹ã‚‰ã®ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²ãè£…ç½®/ã‚½ãƒ•ãƒˆã¯ã©ã‚Œã‹ã€‚',['ãƒ«ãƒ¼ã‚¿','DNSã‚µãƒ¼ãƒ','ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«','DMZ'],2,'å¢ƒç•Œã§é€šä¿¡åˆ¶å¾¡ã€‚'),
  makeQ(4,47,'çµ„ç¹”ã®æƒ…å ±ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ–¹é‡ãƒ»è¡Œå‹•æŒ‡é‡ã¯ã©ã‚Œã‹ã€‚',['ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡','ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°','æƒ…å ±ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼','èªè¨¼'],2,'å…¨æ§‹æˆå“¡å¯¾è±¡ã®åŸºæœ¬æ–¹é‡ã€‚'),
  makeQ(4,48,'èª°ãŒã©ã®æ¨©é™ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‹ã‚’åˆ¶å¾¡ã™ã‚‹æŠ€è¡“ã¯ã©ã‚Œã‹ã€‚',['ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°','ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡','æš—å·åŒ–','ãƒ‡ã‚¸ã‚¿ãƒ«ç½²å'],1,'Access Controlã€‚'),
  makeQ(4,49,'å†…å®¹ã«å•é¡ŒãŒã‚ã‚Œã°é€šä¿¡ã‚’é®æ–­ã™ã‚‹æŠ€è¡“ã¯ã©ã‚Œã‹ã€‚',['ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡','VLAN','ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°','æš—å·åŒ–'],2,'URL/ãƒ‘ã‚±ãƒƒãƒˆç­‰ã®æ¤œæŸ»ã€‚'),
  makeQ(4,50,'ç‰©ç†ã«ä¾å­˜ã›ãšä»®æƒ³çš„ã«LANåˆ†å‰²ã™ã‚‹æŠ€è¡“ã¯ã©ã‚Œã‹ã€‚',['WAN','DMZ','LAN','VLAN'],3,'Virtual LANã€‚'),
  makeQ(4,51,'æš—å·åŒ–å‰ã®æ–‡ã¯ã©ã‚Œã‹ã€‚',['æš—å·æ–‡','å¹³æ–‡','éµ','å¾©å·'],1,'Plaintextã€‚'),
  makeQ(4,52,'æš—å·æ–‡ã‚’å¹³æ–‡ã«æˆ»ã™æ“ä½œã¯ã©ã‚Œã‹ã€‚',['æš—å·åŒ–','ç¬¦å·åŒ–','å¾©å·','åœ§ç¸®'],2,'Decryptionã€‚'),
  makeQ(4,53,'åŒã˜éµã§æš—å·/å¾©å·ã™ã‚‹æ–¹å¼ã¯ã©ã‚Œã‹ã€‚',['å…¬é–‹éµæš—å·','å…±é€šéµæš—å·','ã‚»ãƒƒã‚·ãƒ§ãƒ³éµæ–¹å¼','ãƒ‡ã‚¸ã‚¿ãƒ«ç½²å'],1,'å¯¾ç§°éµæš—å·ã€‚'),
  makeQ(4,54,'å…¬é–‹éµã§æš—å·åŒ–ã—ç§˜å¯†éµã§å¾©å·ã™ã‚‹æ–¹å¼ã¯ã©ã‚Œã‹ã€‚',['å…±é€šéµæš—å·','ã‚»ãƒƒã‚·ãƒ§ãƒ³éµæ–¹å¼','å…¬é–‹éµæš—å·','ã‚·ãƒ¼ã‚¶ãƒ¼æš—å·'],2,'éå¯¾ç§°éµæš—å·ã€‚'),
  makeQ(4,55,'å…±é€šéµã¨å…¬é–‹éµã‚’çµ„ã¿åˆã‚ã›ã‚‹æ–¹å¼ã¯ã©ã‚Œã‹ã€‚',['DES','RSA','ã‚»ãƒƒã‚·ãƒ§ãƒ³éµæ–¹å¼','SSL/TLS'],2,'éµé…é€ã«å…¬é–‹éµã€æœ¬æ–‡ã«å…±é€šéµã€‚'),
  makeQ(4,56,'æœ¬äººæ€§ã‚’è¨¼æ˜ã™ã‚‹æŠ€è¡“ã¯ã©ã‚Œã‹ã€‚',['æš—å·åŒ–','å¾©å·','ãƒ‡ã‚¸ã‚¿ãƒ«ç½²å','é›»å­ã™ã‹ã—'],2,'ç½²åã§æ”¹ã–ã‚“æ¤œçŸ¥ã¨æœ¬äººæ€§ã€‚'),
  makeQ(4,57,'å…¬é–‹éµã®æŒã¡ä¸»ã‚’è¨¼æ˜ã™ã‚‹é›»å­ãƒ‡ãƒ¼ã‚¿ã¯ã©ã‚Œã‹ã€‚',['ãƒ‡ã‚¸ã‚¿ãƒ«ç½²å','ç§˜å¯†éµ','é›»å­è¨¼æ˜æ›¸','èªè¨¼å±€'],2,'è¨¼æ˜æ›¸ã«å…¬é–‹éµã¨ä¸»ä½“æƒ…å ±ã€‚'),
  makeQ(4,58,'httpsã§ä½¿ã†æš—å·åŒ–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯ã©ã‚Œã‹ã€‚',['HTTP','FTP','SSL/TLS','SMTP'],2,'TLSãŒç¾è¡Œã€‚'),
  makeQ(4,59,'ç”»åƒã«è‘—ä½œè€…åãªã©ã®æƒ…å ±ã‚’åŸ‹ã‚ã‚‹æŠ€è¡“ã¯ã©ã‚Œã‹ã€‚',['ãƒ‡ã‚¸ã‚¿ãƒ«ç½²å','æš—å·åŒ–','ãƒ‘ãƒªãƒ†ã‚£ãƒ“ãƒƒãƒˆ','é›»å­ã™ã‹ã—'],3,'é€ã‹ã—ã§æ¨©åˆ©ä¿è­·ã€‚'),
  makeQ(4,60,'èª¤ã‚Šæ¤œå‡ºã®ãŸã‚ãƒ‘ã‚±ãƒƒãƒˆã«åŠ ãˆã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ã©ã‚Œã‹ã€‚',['åˆ¶å¾¡ã‚³ãƒ¼ãƒ‰','èª¤ã‚Šæ¤œå‡ºç¬¦å·','å¾©å·éµ','ãƒ•ã‚£ãƒ«ã‚¿æƒ…å ±'],1,'CRCã‚„ãƒã‚§ãƒƒã‚¯ã‚µãƒ ç­‰ã€‚'),
  makeQ(4,61,'1ãƒ“ãƒƒãƒˆä»˜åŠ ã—1ã®å€‹æ•°ã‚’å¶å¥‡ã§èª¿æ•´ã™ã‚‹ãƒ“ãƒƒãƒˆã¯ã©ã‚Œã‹ã€‚',['ç¬¦å·ãƒ“ãƒƒãƒˆ','ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ“ãƒƒãƒˆ','ãƒ‘ãƒªãƒ†ã‚£ãƒ“ãƒƒãƒˆ','åˆ¶å¾¡ãƒ“ãƒƒãƒˆ'],2,'å¶æ•°/å¥‡æ•°ãƒ‘ãƒªãƒ†ã‚£ã€‚'),
  makeQ(4,62,'å›ç·šã‚’å æœ‰ã›ãšå°ãƒ–ãƒ­ãƒƒã‚¯ã§è»¢é€ã™ã‚‹æ–¹å¼ã¯ã©ã‚Œã‹ã€‚',['å›ç·šäº¤æ›','ãƒ‘ã‚±ãƒƒãƒˆäº¤æ›','ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°','ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ'],1,'IPç¶²ã®åŸºæœ¬æ–¹å¼ã€‚'),
  makeQ(4,63,'ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯ã©ã‚Œã‹ã€‚',['TCP','IP','ã‚¤ãƒ¼ã‚µãƒãƒƒãƒˆ','HTTP'],3,'HTTPã¯ã‚¢ãƒ—ãƒªå±¤ã€‚'),
  makeQ(4,64,'ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆå±¤ã®ä¸»ãªå½¹å‰²ã¯ã©ã‚Œã‹ã€‚',['ãƒ‡ãƒ¼ã‚¿ã‚’ç›®çš„åœ°ã«é‹ã¶','ç‰©ç†å±¤è¦å®š','é€šä¿¡ã‚½ãƒ•ãƒˆã¨ã®ã‚„ã‚Šå–ã‚Š','ä¿¡é ¼æ€§ã®é«˜ã„é€šä¿¡'],3,'TCPã«ã‚ˆã‚‹ä¿¡é ¼æ€§æä¾›ãªã©ã€‚'),
  makeQ(4,65,'IPv4ã®10é€²è¡¨ç¾ã§1ãƒ–ãƒ­ãƒƒã‚¯ã®ç¯„å›²ã¯ã©ã‚Œã‹ã€‚',['1ã€œ254','0ã€œ254','0ã€œ255','1ã€œ255'],2,'0ã€œ255ã®256å€¤ã€‚'),

  // ===== ç¬¬6ç« ï¼ˆQ116-165 ã®50å•ï¼‰ =====
  makeQ(6,116,'è¨ˆç®—ã‚„æƒ…å ±å‡¦ç†ã®æ‰‹é †ã‚’å®šå¼åŒ–ã—ãŸã‚‚ã®ã¯ã©ã‚Œã‹ã€‚',['ãƒ—ãƒ­ã‚°ãƒ©ãƒ ','ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ','ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ','åˆ¶å¾¡æ§‹é€ '],2,'æ‰‹é †ãã®ã‚‚ã®ãŒã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€‚'),
  makeQ(6,117,'ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ãŠã‘ã‚‹å®šå¼åŒ–ã¨ã¯ä½•ã‹ã€‚',['é«˜é€Ÿå®Ÿè¡Œ','è¨€èªã§è¨˜è¿°','æ±ºã¾ã£ãŸå½¢ã§è¡¨ç¾','å›³ã§è¡¨ç¾'],2,'å¼ã‚„è¨€è‘‰ã§å³å¯†ã«è¡¨ã™ã“ã¨ã€‚'),
  makeQ(6,118,'ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒå®Ÿè¡Œã§ãã‚‹ã‚ˆã†è¨˜è¿°ã—ãŸã‚‚ã®ã¯ã©ã‚Œã‹ã€‚',['ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ','ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ','å®šå¼åŒ–','ãƒ—ãƒ­ã‚°ãƒ©ãƒ '],3,'å®Ÿè¡Œå¯èƒ½ãªå½¢ãŒãƒ—ãƒ­ã‚°ãƒ©ãƒ ã€‚'),
  makeQ(6,119,'ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ å®Ÿè¡Œèƒ½åŠ›ã®èª¬æ˜ã¯ã©ã‚Œã‹ã€‚',['èª¤ã‚Šæ‰‹é †ã‚’è‡ªå‹•ä¿®æ­£','è‡ªå¾‹çš„ã«è¿½åŠ å‡¦ç†','è¨˜è¿°é€šã‚Šé«˜é€Ÿã«å®Ÿè¡Œ','å¸¸ã«äººã‚ˆã‚ŠåŠ¹ç‡çš„'],2,'å‘½ä»¤é€šã‚Šé«˜é€Ÿã«å‡¦ç†ã™ã‚‹ã€‚'),
  makeQ(6,120,'å‡¦ç†ã®æµã‚Œã‚’è¡¨ã™å›³ã¯ã©ã‚Œã‹ã€‚',['çŠ¶æ…‹é·ç§»å›³','ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ','è«–ç†å›è·¯å›³','çœŸç†å€¤è¡¨'],1,'ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã§è¡¨ç¾ã€‚'),
  makeQ(6,121,'æ©Ÿå™¨ãªã©ã®çŠ¶æ…‹ã®ç§»ã‚Šå¤‰ã‚ã‚Šã‚’è¡¨ã™å›³ã¯ã©ã‚Œã‹ã€‚',['ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£å›³','ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ','çŠ¶æ…‹é·ç§»å›³','é †æ¬¡æ§‹é€ '],2,'State machineã€‚'),
  makeQ(6,122,'å„å‡¦ç†ãŒç›´ç·šçš„ã«ã¤ãªãŒã‚‹åˆ¶å¾¡æ§‹é€ ã¯ã©ã‚Œã‹ã€‚',['é¸æŠæ§‹é€ ','åå¾©æ§‹é€ ','é †æ¬¡æ§‹é€ ','åˆ†å²æ§‹é€ '],2,'é †ã«å®Ÿè¡Œã€‚'),
  makeQ(6,123,'æ¡ä»¶ã«ã‚ˆã£ã¦å‡¦ç†ãŒåˆ†ã‹ã‚Œã‚‹åˆ¶å¾¡æ§‹é€ ã¯ã©ã‚Œã‹ã€‚',['é †æ¬¡æ§‹é€ ','é¸æŠæ§‹é€ ','åå¾©æ§‹é€ ','æ‰‹ç¶šãå‹'],1,'ifãªã©ã€‚'),
  makeQ(6,124,'æ¡ä»¶ãŒçœŸã®é–“ç¹°ã‚Šè¿”ã™åˆ¶å¾¡æ§‹é€ ã¯ã©ã‚Œã‹ã€‚',['é †æ¬¡æ§‹é€ ','é¸æŠæ§‹é€ ','åå¾©æ§‹é€ ','æ‰‹ç¶šãå‹'],2,'whileã‚„forã§è¡¨ç¾ã€‚'),
  makeQ(6,125,'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ‰‹é †ã®æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã¯ã©ã‚Œã‹ã€‚',['ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°','ãƒ†ã‚¹ãƒˆ','è¨­è¨ˆ','å®Ÿè¡Œ'],2,'è¨­è¨ˆâ†’ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°â†’ãƒ†ã‚¹ãƒˆã€‚'),
  makeQ(6,126,'è¨­è¨ˆã®æ¬¡ã«è¡Œã†ã‚¹ãƒ†ãƒƒãƒ—ã¯ã©ã‚Œã‹ã€‚',['ãƒ†ã‚¹ãƒˆ','è¨­è¨ˆ','ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°','å®Ÿè¡Œ'],2,'è¨­è¨ˆå¾Œã«ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€‚'),
  makeQ(6,127,'æ‰‹é †ã‚’é †ç•ªã«è¨˜è¿°ã™ã‚‹è€ƒãˆæ–¹ã¯ã©ã‚Œã‹ã€‚',['ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘','é–¢æ•°å‹','æ‰‹ç¶šãå‹','ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èª'],2,'å‘½ä»¤åˆ—ã§è¨˜è¿°ã€‚'),
  makeQ(6,128,'ãƒ‡ãƒ¼ã‚¿ã¨å‡¦ç†ã‚’ã¾ã¨ã‚ã¦è¨˜è¿°ã™ã‚‹è€ƒãˆæ–¹ã¯ã©ã‚Œã‹ã€‚',['æ‰‹ç¶šãå‹','ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘','é–¢æ•°å‹','ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©è¨€èª'],1,'ã‚¯ãƒ©ã‚¹/ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§è¡¨ç¾ã€‚'),
  makeQ(6,129,'é–¢æ•°ã®é›†ã¾ã‚Šã¨ã—ã¦è¨˜è¿°ã™ã‚‹è€ƒãˆæ–¹ã¯ã©ã‚Œã‹ã€‚',['æ‰‹ç¶šãå‹','ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘','é–¢æ•°å‹','ä½æ°´æº–è¨€èª'],2,'å‰¯ä½œç”¨ã®å°‘ãªã„é–¢æ•°ä¸­å¿ƒã€‚'),
  makeQ(6,130,'ãƒ¡ãƒ¢ãƒªä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹é ˜åŸŸã¯ã©ã‚Œã‹ã€‚',['å¤‰æ•°å','é…åˆ—','å¤‰æ•°','é–¢æ•°'],2,'å€¤ã‚’ä¿æŒã™ã‚‹ç®±ãŒå¤‰æ•°ã€‚'),
  makeQ(6,131,'æ ¼ç´é ˜åŸŸã«ä»˜ã‘ãŸåå‰ã¯ã©ã‚Œã‹ã€‚',['å¤‰æ•°','å¤‰æ•°å','å‹','æ·»å­—'],1,'è­˜åˆ¥å­=å¤‰æ•°åã€‚'),
  makeQ(6,132,'ifæ–‡ãŒä¸»ã«ç”¨ã„ã‚‰ã‚Œã‚‹åˆ¶å¾¡æ§‹é€ ã¯ã©ã‚Œã‹ã€‚',['é †æ¬¡','é¸æŠ','åå¾©','é–¢æ•°å®šç¾©'],1,'æ¡ä»¶åˆ†å²ã«ä½¿ç”¨ã€‚'),
  makeQ(6,133,'for/whileãŒä¸»ã«ç”¨ã„ã‚‰ã‚Œã‚‹åˆ¶å¾¡æ§‹é€ ã¯ã©ã‚Œã‹ã€‚',['é †æ¬¡','é¸æŠ','åå¾©','é–¢æ•°å®šç¾©'],2,'ç¹°ã‚Šè¿”ã—ã€‚'),
  makeQ(6,134,'Pythonã®range(åˆæœŸå€¤, çµ‚äº†å€¤)ã¯ã©ã“ã¾ã§ç¹°ã‚Šè¿”ã™ã‹ã€‚',['çµ‚äº†å€¤ã¾ã§','çµ‚äº†å€¤ã®ç›´å‰ã¾ã§','åˆæœŸå€¤ã¾ã§','å¢—åˆ†0ã¾ã§'],1,'ä¸Šé™ã¯å«ã¾ãªã„ã€‚'),
  makeQ(6,135,'whileæ–‡ãŒç¹°ã‚Šè¿”ã™æ¡ä»¶ã¯ã©ã‚Œã‹ã€‚',['æ¡ä»¶ãŒçœŸã®é–“','çµ‚äº†å€¤ã¾ã§','å›æ•°ãŒæ±ºã¾ã£ã¦ã„ã‚‹å ´åˆã®ã¿','ä¸€åº¦å®Ÿè¡Œã¾ã§'],0,'æ¡ä»¶å¼ãŒtrueã®é–“ã€‚'),
  makeQ(6,136,'åŒå‹ã®å¤‰æ•°ã‚’é›†ã‚ä¸€ã¤ã®åå‰ã‚’ä»˜ã‘ãŸã‚‚ã®ã¯ã©ã‚Œã‹ã€‚',['å¤‰æ•°','ãƒªã‚¹ãƒˆ','é–¢æ•°','é…åˆ—'],3,'é…åˆ—/ãƒªã‚¹ãƒˆã€‚'),
  makeQ(6,137,'é…åˆ—ã‚’æ§‹æˆã™ã‚‹ä¸€ã¤ã²ã¨ã¤ã¯ã©ã‚Œã‹ã€‚',['æ·»å­—','å¤‰æ•°å','è¦ç´ ','é ˜åŸŸ'],2,'å„è¦ç´ (element)ã€‚'),
  makeQ(6,138,'é…åˆ—ã®è¦ç´ ç•ªå·ã¯ã©ã‚Œã‹ã€‚',['å¤‰æ•°å','è¦ç´ ','å€¤','æ·»å­—'],3,'index/æ·»å­—ã€‚'),
  makeQ(6,139,'å¼•æ•°ã‚’å—ã‘å‡¦ç†ã—çµæœã‚’è¿”ã™ã¾ã¨ã¾ã‚Šã¯ã©ã‚Œã‹ã€‚',['å¤‰æ•°','é…åˆ—','ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ','é–¢æ•°'],3,'é–¢æ•°(function)ã€‚'),
  makeQ(6,140,'é–¢æ•°ãŒå—ã‘å–ã‚‹å€¤ã¯ã©ã‚Œã‹ã€‚',['æˆ»ã‚Šå€¤','å¼•æ•°','ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°','ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°'],1,'parameter/argumentã€‚'),
  makeQ(6,141,'é–¢æ•°ãŒè¿”ã™çµæœã®å€¤ã¯ã©ã‚Œã‹ã€‚',['å¼•æ•°','æˆ»ã‚Šå€¤','å¤‰æ•°','ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°'],1,'return valueã€‚'),
  makeQ(6,142,'ä»–ã‹ã‚‰å‚ç…§ã§ããªã„å¤‰æ•°ã¯ã©ã‚Œã‹ã€‚',['ã‚°ãƒ­ãƒ¼ãƒãƒ«','ãƒ­ãƒ¼ã‚«ãƒ«','é…åˆ—','æ·»å­—'],1,'ã‚¹ã‚³ãƒ¼ãƒ—ã¯é–¢æ•°å†…ã€‚'),
  makeQ(6,143,'ã©ã“ã‹ã‚‰ã§ã‚‚å‚ç…§ã§ãã‚‹å¤‰æ•°ã¯ã©ã‚Œã‹ã€‚',['ãƒ­ãƒ¼ã‚«ãƒ«','ã‚°ãƒ­ãƒ¼ãƒãƒ«','å¼•æ•°','æˆ»ã‚Šå€¤'],1,'ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å…¨ä½“ã«å¯è¦–ã€‚'),
  makeQ(6,144,'å¤§é‡ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ç›®çš„ã‚’æ¢ã™ã“ã¨ã¯ã©ã‚Œã‹ã€‚',['æ•´åˆ—','æ¢ç´¢','ã‚½ãƒ¼ãƒˆ','ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°'],1,'searchã€‚'),
  makeQ(6,145,'æœ€åˆã‹ã‚‰é †ã«è¦‹ã¦ã„ãæ¢ç´¢ã¯ã©ã‚Œã‹ã€‚',['äºŒåˆ†æ¢ç´¢','ãƒãƒ–ãƒ«ã‚½ãƒ¼ãƒˆ','ç·šå½¢æ¢ç´¢','ãƒãƒƒã‚·ãƒ¥æ¢ç´¢'],2,'linear searchã€‚'),
  makeQ(6,146,'äºŒåˆ†æ¢ç´¢ã®å‰ææ¡ä»¶ã¯ã©ã‚Œã‹ã€‚',['ãƒ©ãƒ³ãƒ€ãƒ é…ç½®','äºŒæ¬¡å…ƒé…åˆ—','æ•´åˆ—æ¸ˆã¿','ãƒ‡ãƒ¼ã‚¿é‡ãŒå°‘ãªã„'],2,'æ˜‡é †ç­‰ã§ä¸¦ã‚“ã§ã„ã‚‹å¿…è¦ã€‚'),
  makeQ(6,147,'äºŒåˆ†æ¢ç´¢ã®åŸºæœ¬æ‰‹é †ã¯ã©ã‚Œã‹ã€‚',['é †ã«å…¨æ¢ç´¢','éš£æ¥æ¯”è¼ƒã§å…¥æ›¿','3åˆ†å‰²æ¯”è¼ƒ','åŠåˆ†ã«åˆ†ã‘ã¦å«ã‚€å´ã‚’å†æ¢ç´¢'],3,'middleã¨æ¯”è¼ƒã—ã¦ç¯„å›²ã‚’çµã‚‹ã€‚'),
  makeQ(6,148,'åŸºæº–ã«åŸºã¥ãä¸¦ã¹æ›¿ãˆã‚‹ã“ã¨ã¯ã©ã‚Œã‹ã€‚',['æ¢ç´¢','ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°','æ•´åˆ—(ã‚½ãƒ¼ãƒˆ)','åœ§ç¸®'],2,'sortã€‚'),
  makeQ(6,149,'ä¾‹ç¤ºã•ã‚Œã¦ã„ã‚‹æ•´åˆ—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ã©ã‚Œã‹ã€‚',['ã‚¯ã‚¤ãƒƒã‚¯','ãƒãƒ¼ã‚¸','ãƒãƒ–ãƒ«','é¸æŠ'],2,'éš£æ¥äº¤æ›ã®ãƒãƒ–ãƒ«ã‚½ãƒ¼ãƒˆã€‚'),
  makeQ(6,150,'å„ªã‚ŒãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®åŸºæº–ã¯ã©ã‚Œã‹ã€‚',['ã‚³ãƒ¼ãƒ‰ãŒçŸ­ã„','åˆ¶å¾¡ãŒè¤‡é›‘','è¨ˆç®—é‡ãŒå°‘ãªã„','æ‰‹ç¶šããŒå¤šã„'],2,'ä¸€èˆ¬ã«è¨ˆç®—é‡(O)ãŒå°ã•ã„ã€‚'),
  makeQ(6,151,'ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒç›´æ¥ç†è§£ã§ãã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ä½•ã§è¨˜ã•ã‚Œã‚‹ã‹ã€‚',['è‹±æ•°å­—','10é€²æ•°','0ã¨1','è¨˜å·'],2,'æ©Ÿæ¢°èªã¯ãƒ“ãƒƒãƒˆåˆ—ã€‚'),
  makeQ(6,152,'æ©Ÿæ¢°èªã‚’è‹±æ•°å­—ã«ç½®æ›ã—ãŸæ®µéšã¯ã©ã‚Œã‹ã€‚',['é«˜æ°´æº–è¨€èª','æ©Ÿæ¢°èªã‚’è‹±æ•°å­—ã«ç½®ãæ›ãˆãŸã‚‚ã®','é–¢æ•°å‹è¨€èª','ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘è¨€èª'],1,'ã‚¢ã‚»ãƒ³ãƒ–ãƒªè¨€èªã«ç›¸å½“ã€‚'),
  makeQ(6,153,'å®Ÿè¡Œå‰ã«ã¾ã¨ã‚ã¦ç¿»è¨³ãŒå¿…è¦ãªè¨€èªã¯ã©ã‚Œã‹ã€‚',['ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èª','JavaScript','ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©è¨€èª','Python'],2,'C/Javaç­‰ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¿…è¦ã€‚'),
  makeQ(6,154,'ä¸»ã«ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å‹•ãè¨€èªã¯ã©ã‚Œã‹ã€‚',['Python','Cè¨€èª','Java','JavaScript'],3,'Webã§æœ€ã‚‚æ™®åŠã€‚'),
  makeQ(6,155,'å¤šãã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒä»˜å±ã—AIã«ã‚‚ä½¿ã‚ã‚Œã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã¯ã©ã‚Œã‹ã€‚',['JavaScript','Python','Cè¨€èª','Java'],1,'Pythonã€‚'),
  makeQ(6,156,'æ‰‹ç¶šãå‹ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©è¨€èªã§åºƒãåˆ©ç”¨ã•ã‚Œã‚‹ã®ã¯ã©ã‚Œã‹ã€‚',['Python','Java','Cè¨€èª','Haskell'],2,'Cè¨€èªã€‚'),
  makeQ(6,157,'Javaä»®æƒ³ãƒã‚·ãƒ³ä¸Šã§å‹•ä½œã™ã‚‹è¨€èªã¯ã©ã‚Œã‹ã€‚',['Cè¨€èª','Python','Java','JavaScript'],2,'JVMã§å‹•ä½œã€‚'),
  makeQ(6,158,'é–¢æ•°å‹è¨€èªã®ä¾‹ã¯ã©ã‚Œã‹ã€‚',['Java','C','Python','Haskell'],3,'Haskellç­‰ã€‚'),
  makeQ(6,159,'å¤‰æ•°ã®ç›®çš„ã«åˆã‚ã›ã¦é¸æŠã™ã‚‹ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚',['æ·»å­—','æˆ»ã‚Šå€¤','å¼•æ•°','å‹'],3,'å‹(type)ã®é¸æŠãŒé‡è¦ã€‚'),
  makeQ(6,160,'Pythonã®é¸æŠæ§‹é€ ã®åˆ¶å¾¡æ–‡ã¯ã©ã‚Œã‹ã€‚',['for','while','if','range'],2,'ifæ–‡ã€‚'),
  makeQ(6,161,'ifæ¡ä»¶ä¸æˆç«‹æ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹ã®ã¯ã©ã‚Œã‹ã€‚',['if','else if','else','while'],2,'elseç¯€ã«è¨˜è¿°ã€‚'),
  makeQ(6,162,'å›æ•°æœªå®šã®ç¹°ã‚Šè¿”ã—ã§æ¨å¥¨ã•ã‚Œã‚‹ã®ã¯ã©ã‚Œã‹ã€‚',['if','for','while','range'],2,'æ¡ä»¶ã§ç¹°ã‚Šè¿”ã™whileã€‚'),
  makeQ(6,163,'é…åˆ—ã§ç‰¹å®šè¦ç´ ã‚’è­˜åˆ¥ã™ã‚‹ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚',['å¤‰æ•°åã¨å‹','è¦ç´ ã¨å€¤','é…åˆ—åã¨æ·»å­—','è¦ç´ åã¨å¼•æ•°'],2,'name[index]ã€‚'),
  makeQ(6,164,'è‡ªè²©æ©Ÿã‚’é–¢æ•°ã¨ã¿ãªã—ãŸã¨ãã®å¼•æ•°ã¯ã©ã‚Œã‹ã€‚',['åœ¨åº«','å†…éƒ¨æ§‹é€ ','æŠ•å…¥ç¡¬è²¨ã‚„é¸æŠãƒœã‚¿ãƒ³','é‡£ã‚ŠéŠ­'],2,'å…¥åŠ›ã«ç›¸å½“ã€‚'),
  makeQ(6,165,'Pythonã§é–¢æ•°ã¯ã©ã“ã«è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã€‚',['å¾Œ','å‰','åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«','ã©ã“ã§ã‚‚ã‚ˆã„'],1,'å‘¼ã³å‡ºã—ã‚ˆã‚Šå‰ã«å®šç¾©ãŒè©•ä¾¡ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚')
];

/********************
 * ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
 ********************/
const $ = (sel)=>document.querySelector(sel);
function shuffle(arr){ return arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]); }
function clamp(n,min,max){return Math.max(min,Math.min(max,n));}
function groupByChapter(items){ return items.reduce((acc,qq)=>{ (acc[qq.chapter] = acc[qq.chapter] || []).push(qq); return acc; },{}); }
function sampleWithoutReplacement(arr, n){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); const t=a[i]; a[i]=a[j]; a[j]=t; }
  return a.slice(0, Math.min(n, a.length));
}
function getMastered(){ try{ return new Set(JSON.parse(localStorage.getItem(CONFIG.masteredKey)||"[]")); }catch(_){ return new Set(); } }
function setMastered(set){ try{ localStorage.setItem(CONFIG.masteredKey, JSON.stringify(Array.from(set))); }catch(_){ /* noop */ } }

/** å¯å¤‰å‡ºé¡Œæ•° **/
function getSampleSize(){ return (state && state.settings && state.settings.sampleSize) ? state.settings.sampleSize : CONFIG.sampleSize; }
function titleText(){ return `ç¬¬3/4/6ç«  CBTï¼ˆåˆè¨ˆ${getSampleSize()}å•ãƒ»å„ç« ãƒãƒ©ãƒ³ã‚¹ï¼‰`; }
function updateMetaLabels(){
  const n = getSampleSize();
  const chip = document.getElementById("chipinfo");
  if(chip){
    const spans = chip.querySelectorAll("span");
    if(spans.length>=2){ spans[1].textContent = `å„ç« ãƒãƒ©ãƒ³ã‚¹æŠ½å‡º / ${n}å•`; }
    else { chip.textContent = `å„ç« ãƒãƒ©ãƒ³ã‚¹æŠ½å‡º / ${n}å•`; }
  }
  document.title = `CBTãƒ†ã‚¹ãƒˆ | ç¬¬3/4/6ç« ã‹ã‚‰ãƒãƒ©ãƒ³ã‚¹æŠ½å‡ºï¼ˆ${n}å•ï¼‰`;
}

// å‡ºé¡Œé…åˆ†ï¼ˆå„ç« ã®å•é¡Œæ•°æ¯”ã«å¿œã˜ã¦å‰²å½“ã€‚ç«¯æ•°ã¯å°æ•°éƒ¨ã®å¤§ãã„é †â†’ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ­ãƒ“ãƒ³ï¼‰
function computeBalancedQuotas(poolByChapter, total){
  const chapters = Object.keys(poolByChapter).map(Number).filter(Number.isFinite);
  if(total<=0 || chapters.length===0){ return {}; }
  const counts = chapters.map(ch=> (poolByChapter[ch] ? poolByChapter[ch].length : 0));
  const sum = counts.reduce((a,b)=>a+b,0);
  if(sum===0){ // ã™ã¹ã¦ç©ºã§ã‚‚å‡ç­‰å‰²
    const base = Math.floor(total/chapters.length);
    const quotas = Object.fromEntries(chapters.map(ch=>[ch, base]));
    let remain = total - base*chapters.length;
    let i=0; while(remain>0){ quotas[chapters[i%chapters.length]]++; remain--; i++; }
    return quotas;
  }
  const wants = chapters.map((ch,i)=>({ ch, want: counts[i]/sum*total }));
  const quotas = Object.fromEntries(wants.map(x=>[x.ch, Math.floor(x.want)]));
  let used = Object.values(quotas).reduce((a,b)=>a+b,0);
  const order = wants.map(x=>({ ch:x.ch, frac: x.want-Math.floor(x.want) }))
                     .sort((a,b)=>b.frac-a.frac)
                     .map(x=>x.ch);
  let i=0; while(used<total){ const ch=order[i%order.length]; quotas[ch]++; used++; i++; }
  return quotas;
}

/********************
 * çŠ¶æ…‹
 ********************/
let state = {
  order: [],              // è¡¨ç¤ºé †ã®idé…åˆ—
  answers: {},            // id -> choiceIndex
  current: 0,
  submitted: false,
  score: 0,
  settings: { excludeMastered: false, sampleSize: CONFIG.sampleSize },
  sampledInfo: { quotas: {}, size: 0 }
};

function load(){ try{ const raw=localStorage.getItem(CONFIG.persistKey); return raw?JSON.parse(raw):null; }catch(_){ return null; } }
function save(){ try{ localStorage.setItem(CONFIG.persistKey, JSON.stringify(state)); }catch(_){ /* noop */ } }

/********************
 * åˆæœŸè¡¨ç¤ºï¼ˆã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ï¼‰
 ********************/
function renderStart(){
  $("#meta").textContent = titleText();
  $("#progress").style.width = "0%";
  const s = document.createElement("div"); s.className = "start";

  const byCh = groupByChapter(BANK);
  const stats = document.createElement("div"); stats.className = "grid";
  Object.keys(byCh).map(Number).sort((a,b)=>a-b).forEach(ch=>{
    const d = document.createElement("div"); d.className = "stat";
    d.innerHTML = `<div class="muted">ç¬¬${ch}ç« ã®å•é¡Œæ•°</div><div style="font-size:20px;font-weight:700">${byCh[ch].length} å•</div>`;
    stats.appendChild(d);
  });

  // å‡ºé¡Œæ•°ãƒ©ã‚¸ã‚ªï¼ˆ20/30/40/50ï¼‰
  const sizes = [20,30,40,50];
  const sizeRow = document.createElement("div"); sizeRow.className='row size-pills';
  const sizeLabel = document.createElement("div"); sizeLabel.className='muted'; sizeLabel.textContent='1å›ã®å‡ºé¡Œæ•°:'; sizeRow.appendChild(sizeLabel);
  const currentSize = getSampleSize();
  let startBtn = null;
  sizes.forEach(n=>{
    const id = `size-${n}`;
    const input = document.createElement('input'); input.type='radio'; input.name='samplesize'; input.id=id; input.value=String(n); input.className='sr-only';
    if(currentSize===n) input.checked = true;
    const label = document.createElement('label'); label.className='chip'; label.setAttribute('for', id); label.textContent=`${n}å•`;
    input.addEventListener('change',()=>{
      state.settings.sampleSize = n; save(); updateMetaLabels(); if(startBtn){ startBtn.textContent = `ãƒ†ã‚¹ãƒˆé–‹å§‹ï¼ˆ${getSampleSize()}å•ã‚’æŠ½å‡ºï¼‰`; }
    });
    sizeRow.appendChild(input); sizeRow.appendChild(label);
  });

  // æ­£è§£æ¸ˆã¿ã‚’é™¤å¤–ãƒˆã‚°ãƒ«
  const settings = document.createElement('div'); settings.className='row';
  const chk = document.createElement('input'); chk.type='checkbox'; chk.id='excl'; chk.checked = state.settings.excludeMastered;
  chk.addEventListener('change',()=>{ state.settings.excludeMastered = chk.checked; save(); });
  const lbl = document.createElement('label'); lbl.className='switch'; lbl.htmlFor='excl'; lbl.innerHTML = '<strong>å‰å›ã¾ã§ã«æ­£è§£ã—ãŸå•é¡Œã‚’é™¤å¤–ã™ã‚‹</strong>';

  const note = document.createElement('div'); note.className='muted';
  const mastered = getMastered(); note.textContent = `ä¿å­˜æ¸ˆã¿ã®æ­£è§£æ¸ˆã¿: ${mastered.size} å•`;

  const btns = document.createElement('div'); btns.className='row';
  startBtn = document.createElement('button'); startBtn.textContent=`ãƒ†ã‚¹ãƒˆé–‹å§‹ï¼ˆ${getSampleSize()}å•ã‚’æŠ½å‡ºï¼‰`;
  startBtn.addEventListener('click', startNewExam);
  const clearBtn = document.createElement('button'); clearBtn.textContent='æ­£è§£æ¸ˆã¿ãƒªã‚»ãƒƒãƒˆ'; clearBtn.className='ghost';
  clearBtn.addEventListener('click',()=>{ setMastered(new Set()); renderStart(); });

  // é€”ä¸­ã‹ã‚‰å†é–‹ï¼ˆé€²è¡Œä¸­ã®è§£ç­”ãŒã‚ã‚‹å ´åˆï¼‰
  if(state.order && state.order.length>0 && !state.submitted){
    const resumeBtn = document.createElement('button'); resumeBtn.textContent='é€”ä¸­ã‹ã‚‰å†é–‹'; resumeBtn.className='secondary';
    resumeBtn.addEventListener('click', ()=>{ render(); });
    btns.appendChild(resumeBtn);
  }

  btns.appendChild(startBtn); btns.appendChild(clearBtn);

  s.appendChild(stats);
  s.appendChild(sizeRow);
  const row = document.createElement('div'); row.className='row'; row.appendChild(chk); row.appendChild(lbl); s.appendChild(row);
  s.appendChild(note);
  s.appendChild(btns);

  const screen = $('#screen'); screen.innerHTML=''; screen.appendChild(s);
  updateMetaLabels();
}

function startNewExam(){
  const mastered = getMastered();
  // ãƒã‚¹ã‚¿ãƒ¼æ¸ˆã¿é™¤å¤–
  let pool = state.settings.excludeMastered ? BANK.filter(qq=>!mastered.has(qq.id)) : BANK.slice();
  if(pool.length===0){ pool = BANK.slice(); }
  const N = getSampleSize();
  const byCh = groupByChapter(pool);
  const quotas = computeBalancedQuotas(byCh, N);
  const selected = [];
  Object.keys(byCh).map(Number).sort((a,b)=>a-b).forEach(ch=>{
    const take = Math.min(quotas[ch]||0, byCh[ch].length);
    const picked = sampleWithoutReplacement(byCh[ch], take);
    selected.push(...picked);
  });
  const remaining = pool.filter(q=>selected.indexOf(q)===-1);
  let need = N - selected.length;
  if(need>0){ selected.push(...sampleWithoutReplacement(remaining, need)); }

  const ids = selected.map(q=>q.id);
  state.order = CONFIG.shuffleQuestions ? shuffle(ids) : ids;
  state.answers={}; state.current=0; state.submitted=false; state.score=0; state.sampledInfo={ quotas, size: state.order.length };
  save(); render();
}

/********************
 * ç”»é¢ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
 ********************/
function render(){
  if(!state.order.length && !state.submitted){ renderStart(); return; }
  const total = state.order.length;
  const idx = clamp(state.current,0,Math.max(0,total-1)); state.current = idx;
  if(state.submitted){ $('#meta').textContent = 'çµæœ'; $('#progress').style.width = '100%'; const screen=$('#screen'); screen.innerHTML=''; screen.appendChild(renderResult()); return; }
  const q = getQuestionByOrder(idx);
  $('#meta').textContent = `${titleText()} â€” å•é¡Œ ${idx+1} / ${total}`;
  updateMetaLabels();
  $('#progress').style.width = `${(total<=1?0:(idx/(total-1)))*100}%`;

  const screen = $('#screen'); screen.innerHTML='';
  const card = document.createElement('div'); card.className='question-card';
  const fs = document.createElement('fieldset'); fs.setAttribute('role','group');
  const lg = document.createElement('legend'); lg.textContent = formatStem(q); fs.appendChild(lg);

  const optsWrap = document.createElement('div'); optsWrap.className='opts';
  let opts = q.options.map((text,i)=>({text,i}));
  const saved = state.answers[q.id];
  if(CONFIG.shuffleOptions && saved==null){ opts = shuffle(opts); }
  opts.forEach(({text,i}, visibleIndex)=>{
    const id = `opt-${q.id}-${visibleIndex}`;
    const label = document.createElement('label'); label.className='opt'; label.setAttribute('for',id);
    const input = document.createElement('input'); input.type='radio'; input.name=`q-${q.id}`; input.id=id; input.value=String(i);
    if(saved!==undefined && saved===i){ input.checked = true; }
    input.addEventListener('change',()=>{ state.answers[q.id]=Number(input.value); save(); });
    const txt = document.createElement('span'); txt.textContent = text;
    label.appendChild(input); label.appendChild(txt); optsWrap.appendChild(label);
  });
  fs.appendChild(optsWrap);
  card.appendChild(fs);

  const nav = document.createElement('div'); nav.className='nav';
  const home = document.createElement('button'); home.textContent='ğŸ  æœ€åˆã®ãƒšãƒ¼ã‚¸'; home.className='ghost';
  home.addEventListener('click', ()=>{ renderStart(); });
  const back = document.createElement('button'); back.textContent='â† æˆ»ã‚‹'; back.className='secondary';
  back.disabled = state.current===0 || !CONFIG.allowReviewBeforeSubmit;
  back.addEventListener('click',()=>{ state.current = clamp(state.current-1,0,total-1); save(); render(); });
  const next = document.createElement('button'); next.textContent = (state.current===total-1)?'è§£ç­”ã‚’é€ä¿¡':'æ¬¡ã¸ â†’';
  next.addEventListener('click',()=>{ if(state.current===total-1){ submitAnswers(); } else { state.current = clamp(state.current+1,0,total-1); save(); render(); } });
  nav.appendChild(home); nav.appendChild(back); nav.appendChild(next); card.appendChild(nav);
  screen.appendChild(card);
}

function renderResult(){
  const wrap = document.createElement('div'); wrap.className='result';
  const h = document.createElement('h2'); h.textContent='çµæœ'; wrap.appendChild(h);

  const total = state.order.length; const percent = Math.round((state.score/total)*100);
  const stats = document.createElement('div'); stats.className='grid';
  stats.appendChild(stat('å¾—ç‚¹', `${state.score} / ${total}ï¼ˆ${percent}%ï¼‰`));
  const quotas = state.sampledInfo.quotas || {}; const byCh = groupByChapter(state.order.map(id=>BANK.find(q=>q.id===id)));
  const dist = document.createElement('div'); dist.className='stat';
  const ul = document.createElement('ul'); ul.className='muted';
  Object.keys(byCh).map(Number).sort((a,b)=>a-b).forEach(ch=>{
    const count = byCh[ch].length; const want = quotas[ch]||count;
    const li = document.createElement('li'); li.textContent = `ç¬¬${ch}ç« : ${count}å•ï¼ˆç›®å®‰${want}ï¼‰`;
    ul.appendChild(li);
  });
  const ttl = document.createElement('div'); ttl.style.fontWeight='700'; ttl.textContent='å‡ºé¡Œå†…è¨³';
  dist.appendChild(ttl); dist.appendChild(ul); stats.appendChild(dist);
  wrap.appendChild(stats);

  if(CONFIG.showExplanationAfterSubmit){
    const reviewOk = document.createElement('div'); reviewOk.className='panel';
    const titleOk = document.createElement('div'); titleOk.style.fontWeight='700'; titleOk.style.marginBottom='8px'; titleOk.textContent='è§£èª¬ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆæ­£è§£ã®ã¿ï¼‰';
    reviewOk.appendChild(titleOk);

    let anyOk=false; const wrongBlocks=[];
    state.order.forEach((id)=>{
      const q = BANK.find(x=>x.id===id); const your = state.answers[id]; const correct = (your===q.correctIndex);
      if(correct){
        const block = document.createElement('div'); block.className='explain correct';
        block.innerHTML = `<div><strong>Q${q.number}</strong> ${escapeHtml(q.stem)}</div>`+
                          `<div class="muted">ã‚ãªãŸã®è§£ç­”: ${escapeHtml(q.options[your])}</div>`+
                          `<div>æ­£è§£: ${escapeHtml(q.options[q.correctIndex])}</div>`+
                          (q.explanation?`<div class="muted">${escapeHtml(q.explanation)}</div>`:'');
        reviewOk.appendChild(block); anyOk=true;
      } else { wrongBlocks.push(q); }
    });
    if(!anyOk){ const none=document.createElement('div'); none.className='muted'; none.textContent='æ­£è§£ã—ãŸå•é¡Œã®è§£èª¬ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚'; reviewOk.appendChild(none); }
    wrap.appendChild(reviewOk);

    const reviewNg = document.createElement('div'); reviewNg.className='panel';
    const titleNg = document.createElement('div'); titleNg.style.fontWeight='700'; titleNg.style.marginBottom='8px'; titleNg.textContent='ä¸æ­£è§£ã®å•é¡Œï¼ˆç•ªå·ã¨å•é¡Œæ–‡ã®ã¿ï¼‰'; reviewNg.appendChild(titleNg);
    if(wrongBlocks.length===0){ const ok=document.createElement('div'); ok.className='muted'; ok.textContent='ä¸æ­£è§£ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚'; reviewNg.appendChild(ok); }
    wrongBlocks.forEach(q=>{ const b=document.createElement('div'); b.className='explain'; b.innerHTML = `<div><strong>Q${q.number}</strong> ${escapeHtml(q.stem)}</div>`; reviewNg.appendChild(b); });
    wrap.appendChild(reviewNg);

    const actions = document.createElement('div'); actions.className='nav';
    const retryWrong = document.createElement('button'); retryWrong.textContent='é–“é•ãˆãŸå•é¡Œã ã‘ãƒªãƒˆãƒ©ã‚¤';
    retryWrong.addEventListener('click', retryIncorrectOnly);
    const retryAll = document.createElement('button'); retryAll.textContent=`${getSampleSize()}å•ã§æ–°ã—ãå—ã‘ã‚‹ï¼ˆç« ãƒãƒ©ãƒ³ã‚¹å†æŠ½å‡ºï¼‰`;
    retryAll.addEventListener('click', startNewExam);

    const toggle = document.createElement('label'); toggle.className='switch';
    const ck=document.createElement('input'); ck.type='checkbox'; ck.checked=state.settings.excludeMastered; ck.addEventListener('change',()=>{ state.settings.excludeMastered=ck.checked; save();});
    const sp=document.createElement('span'); sp.textContent='æ¬¡å›ã‹ã‚‰æ­£è§£æ¸ˆã¿ã‚’é™¤å¤–'; toggle.appendChild(ck); toggle.appendChild(sp);

    const exportBtn = document.createElement('button'); exportBtn.textContent='çµæœã‚’JSONä¿å­˜'; exportBtn.className='secondary';
    exportBtn.addEventListener('click',()=>{
      const payload = { score: state.score, total: state.order.length, answers: state.answers, correctIds: state.order.filter(id=>state.answers[id]===BANK.find(q=>q.id===id).correctIndex), wrongIds: state.order.filter(id=>state.answers[id]!==BANK.find(q=>q.id===id).correctIndex) };
      const blob = new Blob([JSON.stringify(payload,null,2)],{type:'application/json'});
      const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='result.json'; a.click(); URL.revokeObjectURL(url);
    });

    actions.appendChild(retryWrong); actions.appendChild(retryAll); actions.appendChild(toggle); actions.appendChild(exportBtn);
    wrap.appendChild(actions);
  }
  return wrap;
}

function stat(label, value){ const d=document.createElement('div'); d.className='stat'; d.innerHTML = `<div class="muted">${label}</div><div style="font-size:20px;font-weight:700">${value}</div>`; return d; }
function formatStem(q){ return q.stem; }

/********************
 * æ¡ç‚¹ & ãƒªãƒˆãƒ©ã‚¤
 ********************/
function submitAnswers(){
  const mastered = getMastered();
  let score=0;
  state.order.forEach(id=>{ const q=BANK.find(x=>x.id===id); const a=state.answers[id]; const ok = (a===q.correctIndex); if(ok){ score++; mastered.add(id);} });
  setMastered(mastered);
  state.score=score; state.submitted=true; save(); render();
}
function retryIncorrectOnly(){
  const wrongIds = state.order.filter(id=>state.answers[id]!==BANK.find(q=>q.id===id).correctIndex);
  if(wrongIds.length===0){ startNewExam(); return; }
  state.order = shuffle(wrongIds.slice()); state.answers={}; state.current=0; state.submitted=false; state.score=0; state.sampledInfo={ quotas:{}, size: state.order.length };
  save(); render();
}

/********************
 * å…¥åŠ›ï¼ˆã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼‰
 ********************/
function setupKeys(){
  window.addEventListener('keydown',(e)=>{
    const tag = document.activeElement && document.activeElement.tagName;
    if(e.key==='Backspace' && tag!=='INPUT' && tag!=='TEXTAREA' && tag!=='SELECT'){ e.preventDefault(); }
    if(state.submitted) return;
    const q = getQuestionByOrder(state.current); if(!q) return;
    if(e.key>='1' && e.key<='4'){
      const idx = Number(e.key)-1; const radios = document.querySelectorAll(`input[name="q-${q.id}"]`); if(radios[idx]){ radios[idx].checked=true; radios[idx].dispatchEvent(new Event('change')); }
    }
    if(e.key==='Enter'){
      const total = state.order.length; if(state.current===total-1){ submitAnswers(); } else { state.current = clamp(state.current+1,0,total-1); save(); render(); }
    }
  });
}

function getQuestionByOrder(i){ const id=state.order[i]; return BANK.find(q=>q.id===id); }
function escapeHtml(s){ return String(s).replace(/[&<>"]/g, c=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;"}[c])); }

/********************
 * è‡ªå·±ãƒ†ã‚¹ãƒˆï¼ˆç°¡æ˜“ï¼‰
 ********************/
function runSelfTests(){
  try{
    const sum = o=>Object.values(o).reduce((a,b)=>a+b,0);
    // Quotaé…åˆ†ã®åˆè¨ˆ
    const q0 = computeBalancedQuotas({3:new Array(15),4:new Array(50),6:new Array(50)}, 50); console.assert(sum(q0)===50, '[SelfTest] Quotas sum to 50');
    // ç©ºãƒ—ãƒ¼ãƒ«
    const q1 = computeBalancedQuotas({}, 50); console.assert(Object.keys(q1).length===0, '[SelfTest] Empty pool yields empty quotas');
    // 1ç« ã®ã¿
    const q2 = computeBalancedQuotas({3:new Array(7)}, 10); console.assert(q2[3]===10, '[SelfTest] Single chapter gets all');
    // å„å•é¡Œã®å½¢å¼æ¤œæŸ»
    const bad = BANK.filter(x=>!x || typeof x.correctIndex!=='number' || !Array.isArray(x.options) || x.options.length!==4 || x.correctIndex<0 || x.correctIndex>3);
    console.assert(bad.length===0, '[SelfTest] All questions have 4 options and valid correctIndex');
    // ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°æ•°ã®æ¤œæŸ»
    const byCh = groupByChapter(BANK); const quotas = computeBalancedQuotas(byCh, 30);
    let picked=[]; Object.keys(byCh).forEach(k=>{ picked=picked.concat(sampleWithoutReplacement(byCh[k], Math.min(quotas[k]||0, byCh[k].length))); });
    console.assert(picked.length<=30, '[SelfTest] picked length <= target');
  }catch(err){ console.error('[SelfTest] failed', err); }
}

// èµ·å‹•
(function init(){
  const saved = load(); if(saved){ state = {...state, ...saved}; }
  renderStart(); setupKeys(); runSelfTests();
})();
</script>
</body>
</html>
